---
inclusion: manual
---

# ä»£ç éªŒè¯æ ‡å‡†è§„èŒƒ

## ğŸ¯ éªŒè¯ç›®æ ‡

ç¡®ä¿æ‰€æœ‰æ–°å¼€å‘æˆ–æ”¹é€ çš„ç»„ä»¶ç¬¦åˆé¡¹ç›®è´¨é‡æ ‡å‡†ï¼ŒåŒ…æ‹¬ä»£ç è§„èŒƒã€åŠŸèƒ½å®Œæ•´æ€§å’Œç”¨æˆ·ä½“éªŒã€‚

## ğŸ“‹ éªŒè¯å±‚çº§

### 1. ä»£ç å±‚é¢éªŒè¯ï¼ˆè‡ªåŠ¨åŒ–ï¼‰
- æ–‡ä»¶ç»“æ„æ£€æŸ¥
- ä»£ç è§„èŒƒæ£€æŸ¥
- æ„å»ºéªŒè¯
- ç±»å‹æ£€æŸ¥

### 2. åŠŸèƒ½å±‚é¢éªŒè¯ï¼ˆè‡ªåŠ¨åŒ– + æ‰‹åŠ¨ï¼‰
- Toast é€šçŸ¥ç³»ç»Ÿ
- æ•°æ®åˆ·æ–°æœºåˆ¶
- é”™è¯¯å¤„ç†
- ç”¨æˆ·äº¤äº’

### 3. ç”¨æˆ·ä½“éªŒéªŒè¯ï¼ˆæ‰‹åŠ¨ï¼‰
- è§†è§‰æ•ˆæœ
- äº¤äº’æµç•…åº¦
- å“åº”é€Ÿåº¦
- é”™è¯¯æç¤ºå‹å¥½åº¦

## ğŸ” ä»£ç å±‚é¢éªŒè¯æ ‡å‡†

### 1.1 æ–‡ä»¶ç»“æ„æ£€æŸ¥
- [ ] ç»„ä»¶æ–‡ä»¶ä½äºæ­£ç¡®ç›®å½•ï¼ˆ`frontend/src/new/` æˆ– `frontend/src/components/`ï¼‰
- [ ] ä½¿ç”¨æ­£ç¡®æ‰©å±•åï¼ˆ`.tsx` ç”¨äº TypeScript + Reactï¼‰
- [ ] æ–‡ä»¶å‘½åä½¿ç”¨ PascalCaseï¼ˆå¦‚ `DataPasteCard.tsx`ï¼‰
- [ ] ç›¸å…³ç»„ä»¶æ”¾åœ¨åŒä¸€ç›®å½•ä¸‹

**éªŒè¯å‘½ä»¤**:
```bash
# æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨
ls -la frontend/src/new/ComponentName.tsx

# æ£€æŸ¥æ–‡ä»¶æ‰©å±•å
find frontend/src/new -name "*.tsx" | grep ComponentName
```

### 1.2 ä»£ç è§„èŒƒæ£€æŸ¥
- [ ] ä½¿ç”¨ shadcn/ui ç»„ä»¶ï¼ˆæ–°å¸ƒå±€ï¼‰æˆ– MUI ç»„ä»¶ï¼ˆæ—§å¸ƒå±€ï¼‰
- [ ] ä½¿ç”¨è¯­ä¹‰åŒ– Tailwind ç±»åï¼ˆ`bg-surface`, `text-foreground`ï¼‰
- [ ] ç¦æ­¢ç¡¬ç¼–ç é¢œè‰²ï¼ˆ`#fff`, `rgb()`, `bg-blue-500`ï¼‰
- [ ] ç¦æ­¢ç›´æ¥ä½¿ç”¨ CSS å˜é‡ï¼ˆ`var(--dq-*)`ï¼‰
- [ ] ä½¿ç”¨ i18n ç¿»è¯‘ï¼ˆ`t("key")`ï¼‰
- [ ] Props æœ‰æ˜ç¡®ç±»å‹å®šä¹‰

**éªŒè¯å‘½ä»¤**:
```bash
# æ£€æŸ¥ç¡¬ç¼–ç é¢œè‰²
grep -E "#[0-9a-fA-F]{3,6}|rgb\(|hsl\(|bg-blue-|bg-red-|bg-green-" frontend/src/new/ComponentName.tsx

# æ£€æŸ¥ CSS å˜é‡ç›´æ¥ä½¿ç”¨
grep "var(--dq-" frontend/src/new/ComponentName.tsx

# æ£€æŸ¥ i18n ä½¿ç”¨
grep "t(\"" frontend/src/new/ComponentName.tsx
```

### 1.3 æ„å»ºéªŒè¯
- [ ] `npm run build` æˆåŠŸ
- [ ] æ—  TypeScript é”™è¯¯
- [ ] æ—  ESLint é”™è¯¯
- [ ] æ‰“åŒ…ä½“ç§¯åˆç†

**éªŒè¯å‘½ä»¤**:
```bash
cd frontend
npm run build
```

### 1.4 ç±»å‹æ£€æŸ¥
- [ ] Props æœ‰ TypeScript ç±»å‹å®šä¹‰
- [ ] å‡½æ•°å‚æ•°æœ‰ç±»å‹æ³¨è§£
- [ ] çŠ¶æ€å˜é‡æœ‰æ˜ç¡®ç±»å‹
- [ ] æ—  `any` ç±»å‹æ»¥ç”¨

**éªŒè¯å‘½ä»¤**:
```bash
npx tsc --noEmit
```

## ğŸ¯ åŠŸèƒ½å±‚é¢éªŒè¯æ ‡å‡†

### 2.1 Toast é€šçŸ¥ç³»ç»Ÿ
- [ ] ç»„ä»¶æ¥æ”¶ `showNotification` prop
- [ ] å®šä¹‰ `notify` å‡½æ•°
- [ ] æ‰€æœ‰æˆåŠŸæ“ä½œæ˜¾ç¤ºæˆåŠŸ Toastï¼ˆç»¿è‰²ï¼‰
- [ ] æ‰€æœ‰å¤±è´¥æ“ä½œæ˜¾ç¤ºé”™è¯¯ Toastï¼ˆçº¢è‰²ï¼‰
- [ ] è¾“å…¥éªŒè¯å¤±è´¥æ˜¾ç¤ºè­¦å‘Š Toastï¼ˆæ©™è‰²ï¼‰
- [ ] Toast æ¶ˆæ¯ä½¿ç”¨ i18n ç¿»è¯‘

**ä»£ç æ¨¡å¼**:
```typescript
const ComponentName = ({ showNotification }) => {
  const notify = (message, severity = "info") => {
    if (!message) return;
    showNotification?.(message, severity);
  };

  const handleSuccess = () => {
    const successMsg = t("success.message");
    notify(successMsg, "success");
  };

  const handleError = (err) => {
    const errorMsg = t("error.message", { error: err.message });
    notify(errorMsg, "error");
  };
};
```

**æ‰‹åŠ¨éªŒè¯**:
1. æ‰§è¡ŒæˆåŠŸæ“ä½œ â†’ çœ‹åˆ°ç»¿è‰² Toast
2. æ‰§è¡Œå¤±è´¥æ“ä½œ â†’ çœ‹åˆ°çº¢è‰² Toast
3. è¾“å…¥éªŒè¯å¤±è´¥ â†’ çœ‹åˆ°æ©™è‰² Toast
4. Toast åœ¨å±å¹•å³ä¸Šè§’æ˜¾ç¤º
5. Toast 3-5ç§’åè‡ªåŠ¨æ¶ˆå¤±

### 2.2 æ•°æ®åˆ·æ–°æœºåˆ¶
- [ ] ç»„ä»¶æ¥æ”¶ `onDataSourceSaved` æˆ–ç±»ä¼¼å›è°ƒ
- [ ] æ“ä½œæˆåŠŸåè°ƒç”¨å›è°ƒè§¦å‘åˆ·æ–°
- [ ] çˆ¶ç»„ä»¶ä¼ é€’ `triggerRefresh` å‡½æ•°
- [ ] åˆ·æ–°åæ•°æ®æºåˆ—è¡¨è‡ªåŠ¨æ›´æ–°

**ä»£ç æ¨¡å¼**:
```typescript
const ComponentName = ({ onDataSourceSaved }) => {
  const handleSave = async () => {
    // ... ä¿å­˜é€»è¾‘
    if (result.success) {
      onDataSourceSaved?.({
        id: tableName,
        name: tableName,
        sourceType: "duckdb",
        type: "table"
      });
    }
  };
};
```

**æ‰‹åŠ¨éªŒè¯**:
1. æ‰§è¡Œæ“ä½œï¼ˆä¸Šä¼ ã€ä¿å­˜ç­‰ï¼‰
2. æ“ä½œæˆåŠŸåæ•°æ®æºåˆ—è¡¨è‡ªåŠ¨åˆ·æ–°
3. æ–°æ•°æ®ç«‹å³æ˜¾ç¤ºåœ¨åˆ—è¡¨ä¸­

### 2.3 é”™è¯¯å¤„ç†
- [ ] æ‰€æœ‰ API è°ƒç”¨æœ‰ try-catch
- [ ] ç½‘ç»œé”™è¯¯æœ‰å‹å¥½æç¤º
- [ ] éªŒè¯é”™è¯¯æœ‰æ¸…æ™°è¯´æ˜
- [ ] é”™è¯¯æ¶ˆæ¯ä½¿ç”¨ i18n
- [ ] é”™è¯¯çŠ¶æ€æ­£ç¡®æ˜¾ç¤º

**ä»£ç æ¨¡å¼**:
```typescript
const handleSubmit = async () => {
  // è¾“å…¥éªŒè¯
  if (!input.trim()) {
    const errorMsg = t("error.required");
    setError(errorMsg);
    notify(errorMsg, "warning");
    return;
  }

  try {
    const response = await apiCall();
    if (response.success) {
      // æˆåŠŸå¤„ç†
    } else {
      const errorMsg = response.error || t("error.unknown");
      setError(errorMsg);
      notify(errorMsg, "error");
    }
  } catch (err) {
    const errorMsg = t("error.network", { message: err.message });
    setError(errorMsg);
    notify(errorMsg, "error");
  }
};
```

**æ‰‹åŠ¨éªŒè¯**:
1. æ–­ç½‘åæ‰§è¡Œæ“ä½œ â†’ çœ‹åˆ°ç½‘ç»œé”™è¯¯æç¤º
2. è¾“å…¥é”™è¯¯æ•°æ® â†’ çœ‹åˆ°éªŒè¯é”™è¯¯æç¤º
3. é”™è¯¯æ¶ˆæ¯æ¸…æ™°æ˜“æ‡‚

### 2.4 ç”¨æˆ·äº¤äº’
- [ ] æŒ‰é’®æœ‰ loading çŠ¶æ€
- [ ] æŒ‰é’®æœ‰ disabled çŠ¶æ€
- [ ] è¾“å…¥æ¡†æœ‰ focus æ ·å¼
- [ ] è¡¨å•æœ‰éªŒè¯åé¦ˆ
- [ ] æ“ä½œæœ‰å³æ—¶åé¦ˆ

**ä»£ç æ¨¡å¼**:
```typescript
const [loading, setLoading] = useState(false);

<Button 
  onClick={handleSubmit}
  disabled={loading || !isValid}
>
  {loading ? t("actions.loading") : t("actions.submit")}
</Button>

<Input
  value={value}
  onChange={handleChange}
  className="focus:ring-2 focus:ring-primary"
/>
```

## ğŸ¨ ç”¨æˆ·ä½“éªŒéªŒè¯æ ‡å‡†

### 3.1 è§†è§‰æ•ˆæœ
- [ ] ç»„ä»¶æ ·å¼ç¬¦åˆè®¾è®¡ç³»ç»Ÿ
- [ ] æ˜æš—æ¨¡å¼éƒ½æ­£å¸¸æ˜¾ç¤º
- [ ] é¢œè‰²å¯¹æ¯”åº¦è¾¾æ ‡
- [ ] åœ†è§’ã€é˜´å½±ã€é—´è·ä¸€è‡´
- [ ] å“åº”å¼å¸ƒå±€æ­£å¸¸

**éªŒè¯æ­¥éª¤**:
1. åˆ‡æ¢æ˜æš—æ¨¡å¼ â†’ æ ·å¼æ­£å¸¸
2. è°ƒæ•´çª—å£å¤§å° â†’ å¸ƒå±€è‡ªé€‚åº”
3. æ£€æŸ¥é¢œè‰²å¯¹æ¯”åº¦ â†’ æ–‡å­—æ¸…æ™°å¯è¯»
4. å¯¹æ¯”å…¶ä»–ç»„ä»¶ â†’ æ ·å¼ä¸€è‡´

### 3.2 äº¤äº’æµç•…åº¦
- [ ] åŠ¨ç”»æµç•…ï¼ˆæ— å¡é¡¿ï¼‰
- [ ] è¿‡æ¸¡è‡ªç„¶ï¼ˆduration-fast/normal/slowï¼‰
- [ ] åé¦ˆåŠæ—¶ï¼ˆ< 100msï¼‰
- [ ] æ— é—ªçƒæˆ–è·³åŠ¨

**éªŒè¯æ­¥éª¤**:
1. æ‰§è¡Œå„ç§æ“ä½œ â†’ åŠ¨ç”»æµç•…
2. åˆ‡æ¢çŠ¶æ€ â†’ è¿‡æ¸¡è‡ªç„¶
3. ç‚¹å‡»æŒ‰é’® â†’ åé¦ˆåŠæ—¶

### 3.3 å“åº”é€Ÿåº¦
- [ ] é¡µé¢åŠ è½½ < 2s
- [ ] æ“ä½œå“åº” < 500ms
- [ ] API è°ƒç”¨æœ‰ loading æç¤º
- [ ] å¤§æ•°æ®é‡ä¸å¡é¡¿

**éªŒè¯æ­¥éª¤**:
1. åˆ·æ–°é¡µé¢ â†’ å¿«é€ŸåŠ è½½
2. æ‰§è¡Œæ“ä½œ â†’ å¿«é€Ÿå“åº”
3. ä¸Šä¼ å¤§æ–‡ä»¶ â†’ æœ‰è¿›åº¦æç¤º

### 3.4 é”™è¯¯æç¤ºå‹å¥½åº¦
- [ ] é”™è¯¯æ¶ˆæ¯æ¸…æ™°æ˜“æ‡‚
- [ ] æä¾›è§£å†³å»ºè®®
- [ ] é¿å…æŠ€æœ¯æœ¯è¯­
- [ ] ä½¿ç”¨ç”¨æˆ·è¯­è¨€

**éªŒè¯æ­¥éª¤**:
1. è§¦å‘å„ç§é”™è¯¯ â†’ æ¶ˆæ¯æ¸…æ™°
2. æ£€æŸ¥é”™è¯¯æç¤º â†’ æœ‰è§£å†³å»ºè®®
3. æ£€æŸ¥ç”¨æˆ·ç†è§£åº¦ â†’ æ˜“äºç†è§£

## ğŸš€ å¿«é€ŸéªŒè¯æµç¨‹

### è‡ªåŠ¨åŒ–éªŒè¯ï¼ˆ5åˆ†é’Ÿï¼‰
```bash
# 1. æ–‡ä»¶ç»“æ„æ£€æŸ¥
ls -la frontend/src/new/ComponentName.tsx

# 2. ä»£ç è§„èŒƒæ£€æŸ¥
grep -E "#[0-9a-fA-F]{3,6}|rgb\(|var\(--dq-" frontend/src/new/ComponentName.tsx

# 3. æ„å»ºéªŒè¯
cd frontend && npm run build

# 4. ç±»å‹æ£€æŸ¥
npx tsc --noEmit
```

### æ‰‹åŠ¨éªŒè¯ï¼ˆ10åˆ†é’Ÿï¼‰
1. **Toast é€šçŸ¥ï¼ˆ3åˆ†é’Ÿï¼‰**
   - æˆåŠŸæ“ä½œ â†’ ç»¿è‰² Toast âœ…
   - å¤±è´¥æ“ä½œ â†’ çº¢è‰² Toast âœ…
   - éªŒè¯å¤±è´¥ â†’ æ©™è‰² Toast âœ…

2. **æ•°æ®åˆ·æ–°ï¼ˆ2åˆ†é’Ÿï¼‰**
   - æ“ä½œæˆåŠŸ â†’ åˆ—è¡¨åˆ·æ–° âœ…
   - æ–°æ•°æ®æ˜¾ç¤º â†’ ç«‹å³å¯è§ âœ…

3. **é”™è¯¯å¤„ç†ï¼ˆ2åˆ†é’Ÿï¼‰**
   - ç½‘ç»œé”™è¯¯ â†’ å‹å¥½æç¤º âœ…
   - éªŒè¯é”™è¯¯ â†’ æ¸…æ™°è¯´æ˜ âœ…

4. **ç”¨æˆ·ä½“éªŒï¼ˆ3åˆ†é’Ÿï¼‰**
   - æ˜æš—æ¨¡å¼ â†’ éƒ½æ­£å¸¸ âœ…
   - äº¤äº’æµç•… â†’ æ— å¡é¡¿ âœ…
   - å“åº”åŠæ—¶ â†’ æ— å»¶è¿Ÿ âœ…

## ğŸ”§ å¸¸è§é—®é¢˜ä¿®å¤æŒ‡å—

### é—®é¢˜ 1: Toast ä¸æ˜¾ç¤º
**åŸå› **: showNotification prop æœªä¼ é€’ã€notify å‡½æ•°æœªè°ƒç”¨
**ä¿®å¤**: æ£€æŸ¥ prop ä¼ é€’å’Œ notify è°ƒç”¨

### é—®é¢˜ 2: æ•°æ®ä¸åˆ·æ–°
**åŸå› **: å›è°ƒæœªè°ƒç”¨ã€triggerRefresh æœªä¼ é€’
**ä¿®å¤**: æ£€æŸ¥å›è°ƒè°ƒç”¨å’Œ prop ä¼ é€’

### é—®é¢˜ 3: æ ·å¼ä¸æ­£ç¡®
**åŸå› **: ä½¿ç”¨äº†ç¡¬ç¼–ç é¢œè‰²æˆ– CSS å˜é‡
**ä¿®å¤**: æ›¿æ¢ä¸ºè¯­ä¹‰åŒ–ç±»å

### é—®é¢˜ 4: TypeScript é”™è¯¯
**åŸå› **: Props ç±»å‹æœªå®šä¹‰ã€å‚æ•°ç±»å‹ç¼ºå¤±
**ä¿®å¤**: æ·»åŠ  Props æ¥å£å’Œå‚æ•°ç±»å‹

## ğŸ“Š éªŒè¯æŠ¥å‘Šæ¨¡æ¿

### ç»„ä»¶éªŒè¯æŠ¥å‘Š
**ç»„ä»¶åç§°**: ___________  
**éªŒè¯æ—¥æœŸ**: ___________  
**éªŒè¯äºº**: ___________

#### è‡ªåŠ¨åŒ–éªŒè¯ç»“æœ
| æ£€æŸ¥é¡¹ | çŠ¶æ€ | å¤‡æ³¨ |
|--------|------|------|
| æ–‡ä»¶ç»“æ„ | â˜ é€šè¿‡ â˜ å¤±è´¥ | |
| ä»£ç è§„èŒƒ | â˜ é€šè¿‡ â˜ å¤±è´¥ | |
| æ„å»ºéªŒè¯ | â˜ é€šè¿‡ â˜ å¤±è´¥ | |
| ç±»å‹æ£€æŸ¥ | â˜ é€šè¿‡ â˜ å¤±è´¥ | |

#### åŠŸèƒ½éªŒè¯ç»“æœ
| æ£€æŸ¥é¡¹ | çŠ¶æ€ | å¤‡æ³¨ |
|--------|------|------|
| Toast é€šçŸ¥ | â˜ é€šè¿‡ â˜ å¤±è´¥ | |
| æ•°æ®åˆ·æ–° | â˜ é€šè¿‡ â˜ å¤±è´¥ | |
| é”™è¯¯å¤„ç† | â˜ é€šè¿‡ â˜ å¤±è´¥ | |
| ç”¨æˆ·äº¤äº’ | â˜ é€šè¿‡ â˜ å¤±è´¥ | |

#### ç”¨æˆ·ä½“éªŒéªŒè¯ç»“æœ
| æ£€æŸ¥é¡¹ | çŠ¶æ€ | å¤‡æ³¨ |
|--------|------|------|
| è§†è§‰æ•ˆæœ | â˜ é€šè¿‡ â˜ å¤±è´¥ | |
| äº¤äº’æµç•…åº¦ | â˜ é€šè¿‡ â˜ å¤±è´¥ | |
| å“åº”é€Ÿåº¦ | â˜ é€šè¿‡ â˜ å¤±è´¥ | |
| é”™è¯¯æç¤º | â˜ é€šè¿‡ â˜ å¤±è´¥ | |

#### æ€»ä½“è¯„ä»·
- **é€šè¿‡é¡¹**: _____ / 12
- **å¤±è´¥é¡¹**: _____ / 12
- **é€šè¿‡ç‡**: _____%

**ç»“è®º**: â˜ é€šè¿‡éªŒè¯ â˜ éœ€è¦ä¿®å¤

## ğŸ“š å‚è€ƒæ–‡æ¡£

### è®¾è®¡ç³»ç»Ÿ
- AGENTS.md - UI/CSS/ä¸»é¢˜è§„èŒƒ
- tailwind.css - CSS å˜é‡å®šä¹‰
- tailwind.config.js - Tailwind é…ç½®

### ç»„ä»¶ç¤ºä¾‹
- DataPasteCard.tsx - å®Œæ•´ç¤ºä¾‹
- UploadPanel.tsx - Toast ç¤ºä¾‹
- DatabaseForm.tsx - è¡¨å•ç¤ºä¾‹

---

**ç‰ˆæœ¬**: 1.0  
**åˆ›å»ºæ—¶é—´**: 2024-12-02  
**é€‚ç”¨èŒƒå›´**: æ‰€æœ‰æ–°å¼€å‘æˆ–æ”¹é€ çš„ç»„ä»¶  
**çŠ¶æ€**: âœ… æ ‡å‡†è§„èŒƒ
