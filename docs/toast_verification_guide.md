# Toast通知功能验证指南

## 🔍 问题诊断

如果您在页面上看不到Toast通知，请按照以下步骤进行诊断和修复：

## 📋 验证步骤

### 1. 检查应用版本
确认您当前使用的是哪个应用版本：
- 如果页面右上角有"使用新的Shadcn风格UI"切换器，说明您在使用AppSelector
- 新的Shadcn风格UI（推荐）：现代化界面，已完全集成Toast
- 传统UI：经典Material-UI界面，现已添加Toast支持

### 2. 使用Toast测试页面
1. 在Shadcn风格UI中，点击顶部的"Toast测试"标签页
2. 点击不同颜色的测试按钮：
   - 绿色按钮：测试成功Toast
   - 红色按钮：测试错误Toast
   - 橙色按钮：测试警告Toast
   - 蓝色按钮：测试信息Toast
3. 观察页面顶部中央是否出现Toast通知

### 3. 检查浏览器控制台
1. 按F12打开开发者工具
2. 切换到"Console"标签页
3. 执行操作（如上传文件）
4. 查看是否有以下日志：
   ```
   调用showSuccess: 文件 "xxx.csv" 上传成功
   showToast调用: {message: "...", type: "success", duration: 4000}
   创建新Toast: {id: ..., message: "...", type: "success", ...}
   ```

### 4. 检查网络请求
1. 在开发者工具中切换到"Network"标签页
2. 执行文件上传操作
3. 确认上传请求成功完成（状态码200）
4. 如果请求失败，Toast可能不会显示

## 🛠️ 常见问题解决

### 问题1：Toast完全不显示
**可能原因**：ToastProvider未正确包装应用
**解决方案**：
1. 确认使用最新版本的代码
2. 检查浏览器控制台是否有JavaScript错误
3. 尝试刷新页面

### 问题2：只有错误Toast显示，成功Toast不显示
**可能原因**：操作实际上失败了，但界面显示成功
**解决方案**：
1. 检查浏览器控制台的网络请求
2. 查看是否有API错误
3. 确认后端服务正常运行

### 问题3：Toast显示位置不正确
**可能原因**：CSS样式冲突
**解决方案**：
1. 检查是否有其他CSS覆盖了Toast样式
2. Toast应该显示在页面顶部中央
3. 多个Toast会垂直堆叠显示

### 问题4：Toast显示时间太短或太长
**当前设置**：Toast默认显示4秒后自动隐藏
**自定义方法**：可以在调用时指定显示时间
```javascript
showSuccess('消息内容', 6000); // 显示6秒
```

## 🧪 手动测试场景

### 文件上传测试
1. 进入"数据源"页面
2. 选择一个CSV或Excel文件上传
3. 应该看到绿色成功Toast："文件 'xxx.csv' 上传成功"
4. 尝试上传不支持的文件格式（如.txt）
5. 应该看到红色错误Toast："不支持的文件格式..."

### 数据库连接测试
1. 进入"数据源"页面的数据库连接部分
2. 填写数据库连接信息
3. 点击"测试连接"按钮
4. 应该看到成功或失败的Toast通知
5. 点击"连接数据源"按钮
6. 应该看到连接结果的Toast通知

### 数据源删除测试
1. 在数据源列表中找到一个文件
2. 点击删除按钮
3. 确认删除
4. 应该看到绿色成功Toast："文件删除成功"

## 🔧 开发者调试

### 启用详细日志
在浏览器控制台中执行：
```javascript
localStorage.setItem('debug', 'true');
```

### 手动触发Toast
在浏览器控制台中执行：
```javascript
// 需要在React组件内部或通过React DevTools执行
const { showSuccess } = useToast();
showSuccess('手动测试Toast');
```

### 检查Toast状态
在React DevTools中查找ToastProvider组件，检查其state中的toasts数组。

## 📞 获取帮助

如果按照以上步骤仍然无法解决问题：

1. **检查版本**：确认使用的是最新版本的代码
2. **清除缓存**：尝试硬刷新页面（Ctrl+F5或Cmd+Shift+R）
3. **重启服务**：重启前端和后端服务
4. **查看日志**：检查后端服务日志是否有错误

## ✅ 验证成功标志

Toast功能正常工作的标志：
- ✅ 文件上传后显示成功Toast
- ✅ 数据库连接测试显示结果Toast
- ✅ 删除操作显示确认Toast
- ✅ 错误操作显示错误Toast
- ✅ Toast在页面顶部中央显示
- ✅ Toast会自动隐藏
- ✅ 多个Toast会堆叠显示
- ✅ 可以手动关闭Toast

如果以上所有功能都正常，说明Toast通知系统已经成功集成！🎉
