# å¼‚æ­¥ä»»åŠ¡æ¨¡å¼çº¦æŸè§„åˆ™

## ğŸ¯ å¼‚æ­¥ä»»åŠ¡ç»Ÿä¸€æ¨¡å¼

### 1. ä»»åŠ¡åˆ›å»ºç»Ÿä¸€
- **ç»Ÿä¸€æ¥å£**: æ‰€æœ‰å¼‚æ­¥ä»»åŠ¡éƒ½ä½¿ç”¨ `/api/async_query` ç«¯ç‚¹
- **è¯·æ±‚æ¨¡å‹**: ç»Ÿä¸€ä½¿ç”¨ `AsyncQueryRequest` æ¨¡å‹
- **ä»»åŠ¡ç±»å‹**: æ”¯æŒ `task_type` å­—æ®µåŒºåˆ†ä»»åŠ¡ç±»å‹ï¼ˆqueryã€save_to_tableã€exportç­‰ï¼‰
- **è‡ªå®šä¹‰è¡¨å**: æ”¯æŒ `custom_table_name` å­—æ®µç”¨äºç”¨æˆ·è‡ªå®šä¹‰è¡¨å

### 2. ä»»åŠ¡æ‰§è¡Œç»Ÿä¸€
- **è¿æ¥æ± ç®¡ç†**: ç»Ÿä¸€ä½¿ç”¨ `DuckDBConnectionPool` é¿å…é˜»å¡
- **çŠ¶æ€è·Ÿè¸ª**: å®æ—¶æ›´æ–°ä»»åŠ¡çŠ¶æ€ï¼ˆpendingã€runningã€completedã€failedï¼‰
- **è¿›åº¦åé¦ˆ**: é•¿æ—¶é—´ä»»åŠ¡æä¾›è¿›åº¦åé¦ˆ
- **é”™è¯¯å¤„ç†**: å®Œå–„çš„é”™è¯¯å¤„ç†å’Œé‡è¯•æœºåˆ¶

### 3. ä»»åŠ¡å®Œæˆå¤„ç†
- **è‡ªåŠ¨åˆ·æ–°**: ä»»åŠ¡å®Œæˆåè‡ªåŠ¨è§¦å‘æ•°æ®æºåˆ—è¡¨åˆ·æ–°
- **çŠ¶æ€æ£€æµ‹**: é€šè¿‡æ¯”è¾ƒä»»åŠ¡çŠ¶æ€å˜åŒ–æ£€æµ‹å®Œæˆäº‹ä»¶
- **å›è°ƒæœºåˆ¶**: ä½¿ç”¨ `onTaskCompleted` å›è°ƒé€šçŸ¥çˆ¶ç»„ä»¶
- **ç¼“å­˜æ¸…ç†**: è‡ªåŠ¨æ¸…ç†ç›¸å…³ç¼“å­˜ç¡®ä¿æ•°æ®ä¸€è‡´æ€§

## ğŸš« ä¸¥æ ¼ç¦æ­¢çš„å¼‚æ­¥ä»»åŠ¡æ¨¡å¼
- **ç¦æ­¢ä½¿ç”¨** å…¨å±€å•ä¾‹DuckDBè¿æ¥ï¼ˆä¼šå¯¼è‡´é˜»å¡ï¼‰
- **ç¦æ­¢ä½¿ç”¨** æ—§çš„ `/api/async-tasks/create` ç«¯ç‚¹
- **ç¦æ­¢å¿½ç•¥** ä»»åŠ¡å®Œæˆåçš„æ•°æ®æºåˆ·æ–°
- **ç¦æ­¢ç¡¬ç¼–ç ** ä»»åŠ¡IDæˆ–è¡¨åç”Ÿæˆè§„åˆ™
- **ç¦æ­¢ç»•è¿‡** è¿æ¥æ± ç®¡ç†æœºåˆ¶

## âœ… å¿…é¡»éµå¾ªçš„å¼‚æ­¥ä»»åŠ¡è§„èŒƒ
- **ç»Ÿä¸€ä½¿ç”¨** `/api/async_query` ç«¯ç‚¹åˆ›å»ºä»»åŠ¡
- **ç»Ÿä¸€ä½¿ç”¨** `DuckDBConnectionPool` ç®¡ç†è¿æ¥
- **ç»Ÿä¸€ä½¿ç”¨** `onTaskCompleted` å›è°ƒå¤„ç†å®Œæˆäº‹ä»¶
- **ç»Ÿä¸€ä½¿ç”¨** `triggerRefresh()` åˆ·æ–°æ•°æ®æº
- **ç»Ÿä¸€ä½¿ç”¨** `requestManager.clearAllCache()` æ¸…ç†ç¼“å­˜

## ğŸ“ ç›¸å…³æ–‡ä»¶å‚è€ƒ
- å¼‚æ­¥ä»»åŠ¡è·¯ç”±: [api/routers/async_tasks.py](mdc:api/routers/async_tasks.py)
- è¿æ¥æ± ç®¡ç†: [api/core/duckdb_pool.py](mdc:api/core/duckdb_pool.py)
- å¼‚æ­¥ä»»åŠ¡åˆ—è¡¨: [frontend/src/components/AsyncTasks/AsyncTaskList.jsx](mdc:frontend/src/components/AsyncTasks/AsyncTaskList.jsx)
- æ•°æ®å±•ç¤ºç»„ä»¶: [frontend/src/components/Results/ModernDataDisplay.jsx](mdc:frontend/src/components/Results/ModernDataDisplay.jsx)