# Duck Query - æ–°ä¸€ä»£äº¤äº’å¼æ•°æ®æŸ¥è¯¢åˆ†æå¹³å°

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

ä½ æ˜¯å¦æ›¾ä¸ºäº†åˆ†æä¸€ä¸ªä¸´æ—¶çš„ CSV æ–‡ä»¶è€Œå¤§è´¹å‘¨ç« åœ°æ­å»ºæ•°æ®åº“ï¼Ÿæˆ–è€…ä¸ºäº†å…³è”ä¸¤ä¸ªä¸åŒæ¥æºçš„æ•°æ®è€Œå¤´ç–¼ä¸å·²ï¼Ÿ

**Duck Query** å°±æ˜¯ä¸ºæ‚¨è§£å†³è¿™äº›çƒ¦æ¼è€Œç”Ÿçš„ï¼æˆ‘ä»¬æ‰“é€ äº†ä¸€ä¸ªç°ä»£ã€æµç•…çš„ç½‘é¡µå¹³å°ï¼Œè®©æ‚¨èƒ½åƒå–æ°´ä¸€æ ·è½»æ¾åœ°æŸ¥è¯¢å’Œåˆ†ææ•°æ®ã€‚å®ƒçš„æ ¸å¿ƒæ˜¯ä¸€ä¸ªå¼ºå¤§çš„ DuckDB å¼•æ“ï¼Œæ— è®ºæ•°æ®æ¥è‡ªæœ¬åœ°æ–‡ä»¶ã€è¿œç¨‹é“¾æ¥ï¼Œè¿˜æ˜¯æ‚¨çš„ä¸šåŠ¡æ•°æ®åº“ï¼Œåœ¨è¿™é‡Œéƒ½èƒ½è¢«ä¸€è§†åŒä»ï¼Œç”¨æœ€ç®€å•ç›´æ¥çš„ SQL è¿›è¡Œæ¢ç´¢ã€‚

ç›®æ ‡æ˜¯ï¼šå‘Šåˆ«ç¹ççš„ ETL å’Œæ•°æ®å¯¼å…¥ï¼Œè®©æ•°æ®åˆ†æå›å½’æœ¬è´¨â€”â€”å¿«é€Ÿæ´å¯Ÿï¼Œè‡ªç”±æ¢ç´¢ã€‚

## âœ¨ æ ¸å¿ƒäº®ç‚¹

### 1. ä¸‡ç‰©çš†å¯æŸ¥è¯¢
- **æœ¬åœ°æ–‡ä»¶ï¼Œå˜èº«æ•°æ®è¡¨**ï¼šæ— è®ºæ˜¯ CSVã€Parquet è¿˜æ˜¯ Excelï¼Œåªéœ€æ‹–æ‹½ä¸Šä¼ æˆ–ç²˜è´´ï¼Œå®ƒä»¬å°±ä¼šç«‹åˆ»å˜æˆä¸€å¼ å¼ å¯ä»¥æŸ¥è¯¢çš„æ•°æ®è¡¨ã€‚

### 2. è·¨æºè‡ªç”±å…³è” (JOIN)
è¿™å¯èƒ½æ˜¯æœ€é…·çš„åŠŸèƒ½ï¼æ‚¨å¯ä»¥å°†æ¥è‡ª MySQL çš„ä¸šåŠ¡æ•°æ®ã€ä¸€ä¸ªæœ¬åœ°çš„é”€å”®é¢ CSVã€ä¸€ä¸ªè¿œç¨‹çš„ Parquet æ–‡ä»¶ï¼Œåœ¨åŒä¸€ä¸ªæŸ¥è¯¢é‡Œç”¨ `JOIN` å…³è”èµ·æ¥ã€‚å¸®æ‚¨æŠ¹å¹³äº†æ•°æ®æ¥æºçš„å·®å¼‚ï¼Œæ‚¨åªéœ€ä¸“æ³¨äºåˆ†ææœ¬èº«ã€‚

### 3. å¼ºå¤§çš„ SQL ä¸å³æ—¶å¯è§†åŒ–
- **å…¨åŠŸèƒ½ DuckDB å†…æ ¸**ï¼šäº«å—çª—å£å‡½æ•°ã€JSON è§£æç­‰ç°ä»£ SQL çš„å…¨éƒ¨èƒ½åŠ›ã€‚

## ğŸš€ å¿«é€Ÿå¯åŠ¨å’Œä½¿ç”¨æ–¹å¼

æ‚¨åªéœ€è¦ä¸€å°å®‰è£…äº† Docker å’Œ Docker Compose çš„æœºå™¨ï¼Œå°±å¯ä»¥é€šè¿‡ä»¥ä¸‹ç®€å•çš„æ­¥éª¤å¯åŠ¨æ•´ä¸ªå¹³å°ã€‚

> **æç¤º**: `curl` åœ¨ macOS å’Œ Linux ä¸Šé€šå¸¸æ˜¯é¢„è£…çš„ã€‚Windows ç”¨æˆ·å¯èƒ½éœ€è¦ä½¿ç”¨å…¶ä»–æ–¹å¼ä¸‹è½½æ–‡ä»¶ï¼Œæˆ–å®‰è£… `curl`ã€‚

```bash
# 1. åˆ›å»ºå¹¶è¿›å…¥æ–°ç›®å½•
mkdir my-data-query-app && cd my-data-query-app

# 2. ä¸‹è½½ docker-compose.yml éƒ¨ç½²æ–‡ä»¶
# æ³¨æ„: è¯·å°†ä¸‹é¢çš„ URL æ›¿æ¢ä¸ºæ‚¨è‡ªå·±çš„ GitHub ä»“åº“åœ°å€
curl -o docker-compose.yml https://raw.githubusercontent.com/chenkeliang/interactive-data-query/main/deployment/docker-compose.yml

# 3. åˆ›å»ºé…ç½®ç›®å½•å’Œç¤ºä¾‹æ–‡ä»¶
mkdir -p config
curl -o config/app-config.json https://raw.githubusercontent.com/chenkeliang/interactive-data-query/main/deployment/config/app-config.json
curl -o config/datasources.json https://raw.githubusercontent.com/chenkeliang/interactive-data-query/main/deployment/config/datasources.json.example

# 4. åˆ›å»ºæ•°æ®ç›®å½•
mkdir data

# 5. å¯åŠ¨æœåŠ¡
docker compose up -d

# 6. å®Œæˆ!
echo "åº”ç”¨å·²å¯åŠ¨ï¼è¯·åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ http://localhost:3000"
```

## ğŸ”’ æ‚¨çš„æ•°æ®ï¼Œåªå±äºæ‚¨

- **çº¯æµè§ˆå™¨ä¸å†…å­˜è®¡ç®—**ï¼šæˆ‘ä»¬ä¸è®¾æœåŠ¡å™¨ã€æ— éœ€ç™»å½•ã€ä¸å­˜å‚¨æ‚¨çš„ä»»ä½•ä¸šåŠ¡æ•°æ®ã€‚æ‰€æœ‰çš„æ•°æ®å¤„ç†éƒ½åœ¨æ‚¨çš„æµè§ˆå™¨å’Œå®¹å™¨å†…å­˜ä¸­è¿›è¡Œã€‚
- **é…ç½®ç”±æ‚¨æŒæ§**ï¼šæ•°æ®åº“å¯†ç ç­‰æ•æ„Ÿä¿¡æ¯ï¼Œç”±æ‚¨é€šè¿‡æœ¬åœ°çš„é…ç½®æ–‡ä»¶ç®¡ç†ï¼Œæ°¸è¿œä¸ä¼šç¦»å¼€æ‚¨çš„ç”µè„‘ã€‚

## ğŸ‘¨â€ğŸ’» å¼€å‘è€…æŒ‡å—

å¦‚æœæ‚¨æƒ³å‚ä¸å¼€å‘ã€ä¿®æ”¹ä»£ç æˆ–ä»æºç æ„å»ºï¼Œè¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ“ä½œã€‚

1.  **å…‹éš†ä»“åº“**
    ```bash
    git clone https://github.com/graychenk/interactive-data-query.git
    cd interactive-data-query
    ```

2.  **é…ç½® (å¯é€‰)**
    æ‚¨å¯ä»¥æ ¹æ®éœ€è¦ä¿®æ”¹ `config/` ç›®å½•ä¸‹çš„é…ç½®æ–‡ä»¶ã€‚

3.  **ä½¿ç”¨ Docker Compose æ„å»ºå¹¶å¯åŠ¨**
    é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ `docker-compose.yml` æ–‡ä»¶æ˜¯ä¸ºå¼€å‘ç¯å¢ƒè®¾è®¡çš„ï¼Œå®ƒä¼šä»æœ¬åœ°æºç æ„å»ºé•œåƒã€‚
    ```bash
    docker compose up --build -d
    ```

4.  **è®¿é—®åº”ç”¨**
    - å‰ç«¯: `http://localhost:3000`
    - åç«¯ API æ–‡æ¡£: `http://localhost:8000/docs`

## âš™ï¸ é…ç½®

- `config/app-config.json`: åº”ç”¨çš„æ ¸å¿ƒé…ç½®æ–‡ä»¶ï¼Œç”¨äºè®¾ç½® CORSã€æ–‡ä»¶ä¸Šä¼ å¤§å°é™åˆ¶ç­‰ã€‚
- `config/datasources.json`: åœ¨è¿™é‡Œå®šä¹‰æ‚¨çš„æ•°æ®åº“è¿æ¥å’Œé¢„è®¾çš„æ•°æ®æºæŸ¥è¯¢ã€‚
- `config/mysql-configs.json`: ä¸“é—¨ç”¨äºå­˜å‚¨ MySQL çš„è¿æ¥å‡­æ®(è¯·ä½¿ç”¨é¡µé¢è¿›è¡ŒåŠ è½½ï¼Œæ¶‰åŠåˆ°å¯†ç çš„åŠ å¯†ç®—æ³•)ã€‚
- `config/postgresql-configs.json`: ä¸“é—¨ç”¨äºå­˜å‚¨ PostgreSQL çš„è¿æ¥å‡­æ®(è¯·ä½¿ç”¨é¡µé¢è¿›è¡ŒåŠ è½½ï¼Œæ¶‰åŠåˆ°å¯†ç çš„åŠ å¯†ç®—æ³•)ã€‚

## ğŸ“„ æˆæƒè®¸å¯

æœ¬é¡¹ç›®é‡‡ç”¨ [MIT License](https://opensource.org/licenses/MIT) æˆæƒã€‚

å¦‚æœæ‚¨è§‰å¾—è¿™ä¸ªé¡¹ç›®å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·åœ¨ GitHub ä¸Šç»™æˆ‘ä»¬ä¸€ä¸ª Starï¼
